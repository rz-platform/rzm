# Routes
# This file defines all application routes (Higher priority routes first)
# ~~~~

# Default path
GET     /                           controllers.AuthController.index()

# Map static resources from the /public folder to the /assets URL path
GET     /assets/*file               controllers.Assets.at(path="/public", file)

# Login
GET      /signin              controllers.AuthController.loginPage()
POST     /signin              controllers.AuthController.login()

# Sign up
GET      /signup              controllers.AccountController.signup()
POST     /signup              controllers.AccountController.saveAccount()

# Log out
GET /logout controllers.AuthController.logout()

# Repositories list

GET /repositories      controllers.RzRepositoryController.list()

# Repositories creation

GET  /repositories/create controllers.RzRepositoryController.createPage()
POST /repositories/create controllers.RzRepositoryController.save()

# File view

# Repository view

GET /repositories/:account/:repository/tree/:rev controllers.FileViewController.emptyTree(account:String, repository:String, rev: String)
GET /repositories/:account/:repository/tree/:rev/*path controllers.FileViewController.blob(account:String, repository:String, rev: String, path: String)

# Raw view

GET /repositories/:account/:repository/raw/:rev/*path controllers.FileViewController.raw(account:String, repository:String, rev: String, path: String)

# Creator

GET /creator/:templateId/illustration controllers.TemplateController.templatePdf(templateId: String)

GET  /repositories/:account/:repository/creator controllers.TemplateController.overview(account:String, repository:String)
GET  /repositories/:account/:repository/creator/:templateId controllers.TemplateController.view(account:String, repository:String, templateId: String)
POST /repositories/:account/:repository/creator/build controllers.TemplateController.build(account:String, repository:String)

# File upload

GET  /repositories/:account/:repository/upload/:rev controllers.FileUploadController.uploadPage(account:String, repository:String, rev: String, path: String = "")
GET  /repositories/:account/:repository/upload/:rev/*path controllers.FileUploadController.uploadPage(account:String, repository:String, rev: String, path: String)
POST /repositories/:account/:repository/upload/:rev controllers.FileUploadController.upload(account:String, repository:String, rev: String)


# Collaborators

GET  /repositories/:account/:repository/collaborators controllers.CollaboratorsController.page(account:String, repository:String)
POST /repositories/:account/:repository/collaborators controllers.CollaboratorsController.add(account:String, repository:String)
POST /repositories/:account/:repository/collaborators/remove controllers.CollaboratorsController.remove(account:String, repository:String)

# Creation / Editing

POST /repositories/:account/:repository/edit          controllers.FileEditController.edit(account:String, repository:String)

GET  /repositories/:account/:repository/create/file/:rev controllers.FileEditController.addNewItemPage(account:String, repository:String, rev: String, path: String = "")
GET  /repositories/:account/:repository/create/file/:rev/*path controllers.FileEditController.addNewItemPage(account:String, repository:String, rev: String, path: String)

GET  /repositories/:account/:repository/create/folder/:rev controllers.FileEditController.addNewFolderPage(account:String, repository:String, rev: String, path: String = "")
GET  /repositories/:account/:repository/create/folder/:rev/*path controllers.FileEditController.addNewFolderPage(account:String, repository:String, rev: String, path: String)

POST /repositories/:account/:repository/create/item   controllers.FileEditController.addNewItem(account: String, repository: String)

# Repository archive

GET /repositories/:account/:repository/:rev/archive controllers.RzRepositoryController.downloadArchive(account:String, repository:String, rev: String)

# Profile editing page

GET  /profile controllers.AccountController.accountPage()
GET  /profile/image/:account controllers.AccountPictureController.accountPicture(account)
POST /profile/image/ controllers.AccountPictureController.uploadAccountPicture()
POST /profile/image/delete controllers.AccountPictureController.removeAccountPicture()
POST /profile controllers.AccountController.editAccount()
POST /profile/password controllers.AccountController.updatePassword()
POST /profile/tz controllers.AccountController.setTimeZone()

# SSH Keys

GET  /profile/keys controllers.SshKeyController.page()
POST /profile/keys/add controllers.SshKeyController.addKey()
POST /profile/keys/delete controllers.SshKeyController.deleteKey()

# Commit log

GET /repositories/:account/:repository/commits/:rev controllers.RzRepositoryController.commitLog(account:String, repository:String, rev: String, page: Int = 1)
GET /repositories/:account/:repository/commits/:rev/:page controllers.RzRepositoryController.commitLog(account:String, repository:String, rev: String, page: Int)
