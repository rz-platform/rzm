@(userEditForm: Form[AccountData], passwordUpdateForm: Form[PasswordData], zoneIds: scala.collection.SortedMap[String, String])(implicit req:AccountRequestHeader)

@import views.html.helper._
@base.auth(req.messages("profile.title")) {
<h1> @req.messages("profile.title") </h1>
@header.alerts()

<div class="profile-block">
  @form(routes.AccountController.editAccount(), Symbol("class") -> "rz-form rz-form-stacked") {
  @CSRF.formField
  @inputText(userEditForm("userName"), Symbol("_label") -> "User login", Symbol("_help") -> "", Symbol("readonly") -> "readonly")
  @inputText(userEditForm("fullName"), Symbol("_label") -> "Full name", Symbol("_help") -> "")
  @inputText(userEditForm("mailAddress"), Symbol("_label") -> "Mail address", Symbol("_help") -> "")
  <div class="actions">
    <input type="submit" value='@req.messages("profile.submit.data")' class="rz-button rz-button-primary" />
  </div>
  }
</div>

<div class="profile-block">
  @form(routes.AccountController.setTimeZone(), Symbol("class") -> "rz-form rz-form-stacked") {
  @CSRF.formField
  <select name="timezone">
    @zoneIds.map{ case (id, value) =>
    <option value="@{id}" @if(req.account.tz == id) {selected}>@{id} UTC@{value}</option>
    }
  </select>
  <div class="actions">
    <input type="submit" value='@req.messages("profile.submit.timezone")' class="rz-button rz-button-primary" />
  </div>
  }
</div>


<div class="profile-block">
  @form(routes.AccountController.updatePassword(), Symbol("class") -> "rz-form") {
  @CSRF.formField
  @inputPassword(passwordUpdateForm("oldPassword"), Symbol("_label") -> "Current password", Symbol("_help") -> "")
  @inputPassword(passwordUpdateForm("newPassword"), Symbol("_label") -> "New Password", Symbol("_help") -> "")
  <div class="actions">
    <input type="submit" value='@req.messages("profile.submit.password")' class="rz-button rz-button-primary" />
  </div>
  }
</div>

<div class="profile-block">
  @helper.form(action = routes.AccountController.uploadAccountPicture(), Symbol("enctype") -> "multipart/form-data", Symbol("class") -> "rz-form") {
  @CSRF.formField
  @if(req.account.picture) {
  <p>
    <img src="@routes.AccountController.accountPicture(req.account.userName)" />
  </p>
  }
  <input type="file" name="picture" />

  <p>
    <input type="submit" value='@req.messages("profile.submit.picture")' class="rz-button rz-button-primary" />
  </p>
  }
</div>

<div class="profile-block">
  @if(req.account.picture) {
  @helper.form(action = routes.AccountController.removeAccountPicture()) {
  @CSRF.formField
  <input type="submit" value='@req.messages("profile.delete.picture")' class="rz-button rz-button-primary" />
  }
  }
</div>

<div class="profile-block">
  <a href="@routes.SshKeyController.keysPage()" class="rz-button">SSH Keys</a>
</div>
}()
